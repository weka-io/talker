language: python
python:
- '3.4'
- '3.5'
- '3.6'
- '3.7'
script:
- pytest tests/uts -v
- pytest tests/integration -v
dist: xenial
before_install:
- cd tests/integration
- export TALKER_HOST_ID=MyHostId
- docker-compose up --no-start
- docker-compose start
- docker-compose ps
- cd ../../
install:
- pip install .[test]
deploy:
  provider: pypi
  user: wekaio-pypi
  password:
    secure: UN6Eq52h2HMYHJGT+XirNOsl0jBtGnKRq0f0URf6VExZIRkTPsHPMo8PkOh8phkujoZKmDoOaMEKjVMnN4pRlj7HezvdTi7BSpFlCrWxhctnROBcaBZdj3sjNhu1fgrz1NBK0zjeFHVZ2kBz8d/nksWaMwK4cXXva4ggNnx4Cj0wOi9NcnPoh+dbqGa0raizO2BQ9F4oYRPj27+YrAjCQbSW0XTYnIPifKfYFM+ibu8+zw3bbLbQMuXIcL1aS5RsnasYD3d5AcJdNkO9ekA4vwYLFLXlVhUoRN4E0vfOyg2XjQ8tPzgRNz5Y3wegvFpT6uvSIDQEip5oexvyGDSUHtkQYCCdRqhi/r0gzZ3MoPQXgNXb0J7KNxm4bhn0KxQlq6kD4fc5zkW1h6Akx7/0seQgu3BU38Ds0ihy9MigMUhxx5cfpnHByQ8obunqrX1Bz/pnRfy1B61HaGrdHuFqAsrDBDqI4IMusEfDHSZwiQ1cTrWLbEq0lxypnicrD2Pe86cbPn+seV/ZyHFyohoF0Zvqj0yuVOVl4XXouNHowz7++FYJmd8YSw5BL2DhToKlyFBvoQKerw9wYikdlHlr+WqjucCumO8lTmZl0wTxErs7BhtoUE3hFctccvrUk944H43l2gyT7eJwJNGKCq2ZT+p5oEwJYp+VjZ6AO/mlm54=
  on:
    branch: test-deploy
